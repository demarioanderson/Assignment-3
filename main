import java.util.Scanner;

public class Main {

    public static void main(String[] args) {
        Scanner in = new Scanner(System.in);
        SalesSlip slip = new SalesSlip();

        System.out.println("=== Sales List Application ===");
        System.out.println("Enter items (name, price < 100, quantity).");
        System.out.println("Type 'q' as the name to quit.\n");

        while (true) {
            System.out.print("Item name (or 'q' to quit): ");
            String name = in.nextLine().trim();
            if (name.equalsIgnoreCase("q")) {
                break;
            }
            if (name.isEmpty()) {
                System.out.println("Name cannot be empty. Try again.\n");
                continue;
            }

            double price = -1.0;
            while (true) {
                System.out.print("Price (0â€“99.99): ");
                String priceText = in.nextLine().trim();
                try {
                    price = Double.parseDouble(priceText);
                    if (price < 0 || price >= 100) {
                        System.out.println("Price must be between 0 and 100. Try again.");
                    } else {
                        break;
                    }
                } catch (NumberFormatException e) {
                    System.out.println("Invalid number. Try again.");
                }
            }

            int quantity = 0;
            while (true) {
                System.out.print("Quantity (positive integer): ");
                String qtyText = in.nextLine().trim();
                try {
                    quantity = Integer.parseInt(qtyText);
                    if (quantity <= 0) {
                        System.out.println("Quantity must be positive. Try again.");
                    } else {
                        break;
                    }
                } catch (NumberFormatException e) {
                    System.out.println("Invalid integer. Try again.");
                }
            }

            SalesItem item = new SalesItem(name, price, quantity);
            slip.addItem(item);

            System.out.println();
            System.out.println(slip.toString());
            System.out.println();
        }

        System.out.println("\nFinal sales slip:");
        System.out.println(slip.toString());

        in.close();
    }
}
